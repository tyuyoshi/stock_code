# Yahoo Finance API代替案の調査結果 (2025-11-16)

## 概要
Yahoo Finance APIのレート制限問題（30リクエスト/分）に対する有料・無料APIの包括的調査結果。

## 主要な発見
- 多くの有名API（Finnhub、Polygon.io、IEX Cloud）は**日本株に対応していない**
- 日本株対応の最適解は**Twelve Data**（月額$29〜）
- 開発環境では無料の回避策で十分対応可能

## 日本株対応API比較

### 1. Twelve Data ⭐推奨
- **料金**: $29〜$999/月
- **レート制限**: 55〜10,946リクエスト/分
- **日本株**: ✅完全対応
- **リアルタイム**: ✅対応
- **WebSocket**: ✅対応
- **無料枠**: 8リクエスト/分（800/日）

料金プラン詳細:
- Grow: $29/月（55リクエスト/分、同時50-100ユーザー）
- Pro: $79/月（377リクエスト/分、同時200-400ユーザー）
- Enterprise: $229/月（1,597リクエスト/分、同時1,000-2,000ユーザー）
- Ultra: $999/月（無制限、同時5,000-10,000ユーザー）

### 2. EODHD
- **料金**: $29.99〜$79.99/月
- **日本株**: ✅対応（15分遅延）
- **リアルタイム**: ⚠️米国のみ
- **WebSocket**: ⚠️米国のみ

### 3. 東証直接契約
- **15分遅延API**: 約¥50,000〜100,000/月（$333〜670）
- **リアルタイムフィード**: ¥330,000/月（$2,200）
- **メリット**: 公式データ、無制限
- **デメリット**: 高額、契約プロセス複雑

### 4. Alpha Vantage
- **無料枠**: 25リクエスト/日、5リクエスト/分
- **有料**: $49.99/月（75リクエスト/分）
- **日本株**: ⚠️不明確（要確認）

## 開発環境向け無料対策

### 1. VCR.py（レコード＆リプレイ）
- HTTPレスポンスを記録し、テストで再利用
- APIコール100%削減（テスト環境）
- 完全無料

### 2. 静的フィクスチャデータ
- 開発用の静的JSONデータセット
- UI開発時のAPIコール0
- 完全オフライン開発可能

### 3. アグレッシブキャッシング
- 開発環境: 24時間TTL
- 本番環境: 10分/1時間TTL
- Redis活用で60-80%削減

### 4. マルチAPIフォールバック
- Yahoo Finance → Alpha Vantage → フィクスチャ
- 無料枠の組み合わせで5倍の容量

## コスト比較

| フェーズ | ユーザー数 | 推奨プラン | 月額コスト |
|---------|-----------|-----------|-----------|
| MVP | 0-1,000 | Twelve Data Grow | $29 |
| 成長期 | 1,000-5,000 | Twelve Data Pro | $79 |
| スケール期 | 5,000-50,000 | Twelve Data Ultra | $999 |
| エンタープライズ | 50,000+ | 東証直接契約 | $2,200 |

## 実装推奨事項

### フェーズ1（即実装・無料）
1. VCR.py導入
2. フィクスチャデータ生成
3. 開発環境でのアグレッシブキャッシング（24時間TTL）

### フェーズ2（短期・無料）
1. Alpha Vantage無料枠の活用
2. マルチAPIフォールバック実装
3. キャッシュウォーミングスクリプト

### フェーズ3（本番環境・有料）
1. Twelve Data Grow Plan（$29/月）導入
2. 段階的な移行（Yahoo Finance → Twelve Data）
3. モニタリングとコスト最適化

## 重要な洞察
- 開発環境では**完全無料**で対応可能
- VCR.pyとフィクスチャで開発効率大幅向上
- 本番環境でも月額$29から開始可能
- 5万ユーザーで月額売上$500,000の場合、データコスト$2,200は売上の0.44%

## 実装優先順位
1. 🔥 **高**: VCR.py、静的フィクスチャ、アグレッシブキャッシング
2. ⚡ **中**: マルチAPIフォールバック、キャッシュウォーミング
3. 🔵 **低**: 有料APIバックアップ（本番環境のみ）